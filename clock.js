const clockContainer=document.querySelector(".js-clock"),
clockTitle=clockContainer.querySelector(".js-title"),
eclipse=clockContainer.querySelector(".ecl")
maxiEcl=clockContainer.querySelector(".maxi");


// 15:56:00(57360) ~ 18:07:40(65260)
// 17:05:40 ~ 17:05:50 빨강 61540 61550
// 17:05:10 ~ 17:06:20 노랑 61510 ~ 61580

const portion = [0, 0.02, 0.04, 0.06, 0.09, 0.12, 0.16, 0.2, 0.24, 0.28, 0.32, 0.37, 0.42, 0.47, 0.53, 0.58, 0.64, 0.7, 0.75, 0.82, 0.88, 0.95, 1.01, 1.08, 1.15, 1.22, 1.29, 1.36, 1.44, 1.51, 1.59, 1.67, 1.75, 1.83, 1.91, 1.99, 2.08, 2.16, 2.25, 2.34, 2.42, 2.51, 2.6, 2.69, 2.79, 2.88, 2.97, 3.07, 3.17, 3.26, 3.36, 3.46, 3.56, 3.66, 3.76, 3.86, 3.97, 4.07, 4.17, 4.28, 4.39, 4.49, 4.6, 4.71, 4.82, 4.93, 5.04, 5.15, 5.27, 5.38, 5.49, 5.61, 5.72, 5.84, 5.96, 6.07, 6.19, 6.31, 6.43, 6.55, 6.67, 6.79, 6.91, 7.04, 7.16, 7.28, 7.41, 7.51, 7.66, 7.78, 7.91, 8.04, 8.17, 8.3, 8.42, 8.55, 8.68, 8.82, 8.95, 9.08, 9.21, 9.34, 9.48, 9.61, 9.75, 9.88, 10.02, 10.15, 10.29, 10.42, 10.56, 10.7, 10.84, 10.98, 11.12, 11.26, 11.4, 11.54, 11.68, 11.82, 11.96, 12.1, 12.25, 12.39, 12.53, 12.68, 12.82, 12.96, 13.11, 13.25, 13.4, 13.55, 13.69, 13.84, 13.99, 14.13, 14.28, 14.43, 14.58, 14.73, 14.88, 15.03, 15.18, 15.33, 15.48, 15.63, 15.78, 15.93, 16.08, 16.23, 16.39, 16.54, 16.69, 16.85, 17, 17.15, 17.31, 17.46, 17.62, 17.77, 17.92, 18.08, 18.24, 18.39, 18.55, 18.7, 18.86, 19.02, 19.17, 19.33, 19.49, 19.64, 19.8, 19.96, 20.11, 20.27, 20.43, 20.59, 20.75, 20.91, 21.07, 21.22, 21.38, 21.54, 21.7, 21.86, 22.02, 22.18, 22.34, 22.5, 22.66, 22.82, 22.98, 23.14, 23.3, 23.46, 23.62, 23.78, 23.94, 24.1, 24.26, 24.42, 24.58, 24.74, 24.9, 25.07, 25.23, 25.39, 25.55, 25.71, 25.87, 26.03, 26.19, 26.35, 26.51, 26.67, 26.83, 26.99, 27.15, 27.31, 27.47, 27.63, 27.79, 27.95, 28.11, 28.27, 28.43, 28.59, 28.75, 28.91, 29.07, 29.23, 29.39, 29.55, 29.71, 29.87, 30.03, 30.18, 30.34, 30.5, 30.66, 30.82, 30.97, 31.13, 31.29, 31.45, 31.61, 31.76, 31.92, 32.07, 32.23, 32.38, 32.54, 32.69, 32.85, 33, 33.16, 33.31, 33.47, 33.62, 33.77, 33.93, 34.08, 34.23, 34.38, 34.53, 34.68, 34.83, 34.99, 35.14, 35.28, 35.43, 35.58, 35.73, 35.88, 36.03, 36.17, 36.32, 36.47, 36.61, 36.76, 36.9, 37.05, 37.19, 37.34, 37.48, 37.62, 37.76, 37.9, 38.05, 38.19, 38.33, 38.46, 38.6, 38.74, 38.88, 39.02, 39.15, 39.29, 39.42, 39.56, 39.69, 39.82, 39.96, 40.09, 40.22, 40.35, 40.48, 40.61, 40.74, 40.87, 40.99, 41.12, 41.25, 41.37, 41.5, 41.62, 41.74, 41.86, 41.98, 42.1, 42.22, 42.34, 42.46, 42.58, 42.69, 42.81, 42.92, 43.04, 43.15, 43.26, 43.37, 43.48, 43.59, 43.7, 43.81, 43.91, 44.02, 44.12, 44.23, 44.33, 44.43, 44.53, 44.63, 44.73, 44.82, 44.92, 45.02, 45.11, 45.2, 45.3, 45.39, 45.48, 45.57, 45.65, 45.74, 45.83, 45.91, 45.99, 46.08, 46.16, 46.24, 46.31, 46.39, 46.47, 46.54, 46.62, 46.69, 46.76, 46.83, 46.9, 46.97, 47.03, 47.1, 47.16, 47.23, 47.29, 47.35, 47.4, 47.46, 47.52, 47.57, 47.63, 47.68, 47.73, 47.78, 47.83, 47.87, 47.92, 47.96, 48, 48.04, 48.08, 48.12, 48.16, 48.19, 48.23, 48.26, 48.29, 48.32, 48.35, 48.38, 48.4, 48.42, 48.45, 48.47, 48.49, 48.51, 48.52, 48.54, 48.55, 48.56, 48.57, 48.58, 48.59, 48.6, 48.6, 48.6, 48.61, 48.61, 48.6, 48.6, 48.6, 48.59, 48.58, 48.57, 48.56, 48.55, 48.54, 48.52, 48.51, 48.49, 48.47, 48.45, 48.43, 48.4, 48.38, 48.35, 48.32, 48.29, 48.26, 48.23, 48.19, 48.16, 48.12, 48.08, 48.04, 48, 47.96, 47.91, 47.87, 47.82, 47.77, 47.72, 47.67, 47.61, 47.56, 47.5, 47.44, 47.39, 47.32, 47.26, 47.2, 47.13, 47.07, 47, 46.93, 46.86, 46.79, 46.72, 46.64, 46.57, 46.49, 46.41, 46.33, 46.25, 46.17, 46.08, 46, 45.91, 45.82, 45.74, 45.65, 45.56, 45.46, 45.37, 45.27, 45.18, 45.08, 44.98, 44.88, 44.78, 44.68, 44.57, 44.47, 44.36, 44.26, 44.15, 44.04, 43.93, 43.82, 43.7, 43.59, 43.47, 43.36, 43.24, 43.12, 43, 42.88, 42.76, 42.64, 42.51, 42.39, 42.26, 42.14, 42.01, 41.88, 41.75, 41.62, 41.49, 41.36, 41.23, 41.09, 40.96, 40.82, 40.68, 40.55, 40.41, 40.27, 40.13, 39.99, 39.84, 39.7, 39.56, 39.41, 39.27, 39.12, 38.97, 38.83, 38.68, 38.53, 38.38, 38.23, 38.08, 37.92, 37.77, 37.62, 37.46, 37.31, 37.15, 37, 36.84, 36.68, 36.52, 36.36, 36.2, 36.04, 35.88, 35.72, 35.56, 35.4, 35.23, 35.07, 34.91, 34.74, 34.58, 34.41, 34.24, 34.08, 33.91, 33.74, 33.57, 33.4, 33.23, 33.06, 32.89, 32.72, 32.55, 32.38, 32.21, 32.04, 31.86, 31.69, 31.52, 31.34, 31.17, 30.99, 30.82, 30.64, 30.47, 30.29, 30.12, 29.94, 29.76, 29.59, 29.41, 29.23, 29.05, 28.87, 28.7, 28.52, 28.34, 28.16, 27.98, 27.8, 27.62, 27.44, 27.26, 27.08, 26.9, 26.72, 26.54, 26.35, 26.17, 25.99, 25.81, 25.63, 25.45, 25.26, 25.08, 24.9, 24.72, 24.54, 24.35, 24.17, 23.99, 23.81, 23.62, 23.44, 23.26, 23.08, 22.89, 22.71, 22.53, 22.35, 22.16, 21.98, 21.8, 21.61, 21.43, 21.25, 21.07, 20.89, 20.7, 20.52, 20.34, 20.16, 19.98, 19.79, 19.61, 19.43, 19.25, 19.07, 18.89, 18.71, 18.53, 18.34, 18.16, 17.98, 17.8, 17.62, 17.45, 17.27, 17.09, 16.91, 16.73, 16.55, 16.37, 16.2, 16.02, 15.84, 15.66, 15.49, 15.31, 15.13, 14.96, 14.78, 14.61, 14.43, 14.26, 14.09, 13.91, 13.74, 13.57, 13.39, 13.22, 13.05, 12.88, 12.71, 12.54, 12.37, 12.2, 12.03, 11.86, 11.69, 11.53, 11.36, 11.19, 11.03, 10.86, 10.7, 10.53, 10.37, 10.21, 10.04, 9.88, 9.72, 9.56, 9.4, 9.24, 9.08, 8.92, 8.77, 8.61, 8.45, 8.3, 8.14, 7.99, 7.84, 7.68, 7.53, 7.38, 7.23, 7.08, 6.93, 6.78, 6.64, 6.49, 6.35, 6.2, 6.06, 5.92, 5.77, 5.63, 5.49, 5.35, 5.22, 5.08, 4.94, 4.81, 4.68, 4.54, 4.41, 4.28, 4.15, 4.02, 3.9, 3.77, 3.65, 3.52, 3.4, 3.28, 3.16, 3.04, 2.92, 2.81, 2.69, 2.58, 2.47, 2.36, 2.25, 2.15, 2.04, 1.94, 1.84, 1.74, 1.64, 1.54, 1.45, 1.35, 1.26, 1.17, 1.09, 1, 0.92, 0.84, 0.76, 0.69, 0.62, 0.55, 0.48, 0.41, 0.35, 0.29, 0.24, 0.19, 0.14, 0.1, 0.06, 0.03, 0.01];
var ecl = {};
for (var i=57360; i<57360+10*portion.length; i+=10) {
    ecl[i] = portion[(i-57360)/10];
}

function getTime(){
	const date = new Date();
	const minutes = date.getMinutes();
	const hours = date.getHours();
	const seconds = date.getSeconds();
    const hourMinSec = Math.floor((3600*hours+60*minutes+seconds)/10)*10;
	clockTitle.innerText = `${hours < 10 ? `0${hours}` : hours}:${
		minutes < 10 ? `0${minutes}` : minutes}:${
            seconds < 10 ? `0${seconds}` : seconds}`;
    if(hourMinSec>=57360 && hourMinSec<=65260) {
		eclipse.innerText = `${ecl[hourMinSec]} %`;
		if(hourMinSec>=61510 && hourMinSec<=61580) {
			if(hourMinSec>=61540 && hourMinSec<=61550) {
				eclipse.style.color = 'red';
				maxiEcl.style.display = 'inline';
			} else {
				eclipse.style.color = 'yellow';
				maxiEcl.style.display = 'inline';
			}
		} else {
			eclipse.style.color = 'white';
			maxiEcl.style.display = 'none';
		}
	} else {
		eclipse.innerText = `0 %`;
	}
}

function init() {
	getTime();
	setInterval(getTime, 1000);
}

init();
